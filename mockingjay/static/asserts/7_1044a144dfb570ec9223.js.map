{"version":3,"sources":["webpack:///./src/Views/AppList.js","webpack:///./src/styles/appList.scss?31e3","webpack:///./src/styles/appList.scss"],"names":["AppList","props","register","bind","handlePaginationChange","search","state","activePage","pagedApps","records","Array","length","fetchData","owned","pageNum","error","console","log","nextProps","setState","isSearching","location","window","query","parse","event","data","history","push","e","partialName","value","pagedResult","list","map","app","index","id","name","desc","apiForwardTarget","pageCnt"],"mappings":"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","file":"asserts/7_1044a144dfb570ec9223.js","sourcesContent":["'use strict'\n\nimport React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport queryString from 'query-string'\nimport '../styles/appList.scss'\nimport { Table, Header, Button, Pagination, Search } from 'semantic-ui-react'\n\nclass AppList extends Component {\n    constructor(props) {\n        super(props)\n\n        this.register = this.register.bind(this)\n        this.handlePaginationChange = this.handlePaginationChange.bind(this)\n        this.search = this.search.bind(this)\n\n        this.state = { activePage: 1 }\n    }\n\n    componentWillMount() {\n        try {\n            if (!this.props.pagedApps\n                || !this.props.pagedApps.records\n                || !(this.props.pagedApps.records instanceof Array)\n                || this.props.pagedApps.records.length === 0) {\n                this.props.fetchData({ owned: this.props.owned, pageNum: this.state.activePage -1 })\n            }\n        } catch (error) {\n            console.log(this.props.pagedApps)\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({isSearching: false})\n        // 切换 tab 刷新数据\n        if (this.props.owned ^ nextProps.owned) {\n            let search = (this.props.location && this.props.location.search)\n                            ? this.props.location.search\n                            : window.location.search\n            let query = queryString.parse(search)\n            query.owned = nextProps.owned\n            this.setState({ query: query })\n            query.pageNum = 0\n            this.props.fetchData(query)\n        }\n    }\n\n    register(event, data) {\n        this.props.history.push('/app/register')\n    }\n\n    handlePaginationChange(e, data) {\n        this.setState({\n            activePage: data.activePage\n            })\n        this.props.fetchData({ owned: this.props.owned, pageNum: data.activePage -1, partialName: this.state.partialName })\n    }\n\n    search(e, data) {\n        this.setState({isSearching: true, partialName: data.value})\n\n        this.props.fetchData({ owned: this.props.owned, pageNum: this.state.activePage -1, partialName: data.value })\n    }\n\n    render() {\n        let pagedResult = this.props.pagedApps || { records: [] }\n        let list = pagedResult.records || []\n        if (!list || !(list instanceof Array) ) {\n            return (<div>has no state</div>)\n        }\n\n        let { isSearching, partialName } = this.state\n\n        return (\n            <div id='app-list'>\n                <Header as='h2'>应用</Header>\n                <div>\n                    {\n                        this.props.owned ? (<Button onClick={this.register} >创建应用</Button>) : ''\n                    }\n                    <div className='div-search'>\n                        <Search loading={isSearching}\n                            open={false}\n                            onSearchChange={this.search}\n                            value={partialName}\n                            className='search'\n                            placeholder='名称模糊搜索' />\n                    </div>\n                </div>\n                \n                <div>\n                    <Table>\n                        <Table.Header fullWidth>\n                            <Table.Row>\n                                <Table.HeaderCell>ID</Table.HeaderCell>\n                                <Table.HeaderCell>名称</Table.HeaderCell>\n                                <Table.HeaderCell>描述</Table.HeaderCell>\n                                <Table.HeaderCell>代理</Table.HeaderCell>\n                                <Table.HeaderCell>详情</Table.HeaderCell>\n                                <Table.HeaderCell>API List</Table.HeaderCell>\n                            </Table.Row>\n                        </Table.Header>\n\n                        <Table.Body>\n                        {\n                            list.map((app, index) => {\n                                return (\n                                <Table.Row key={index}>\n                                    <Table.Cell>{ app.id }</Table.Cell>\n                                    <Table.Cell>{ app.name }</Table.Cell>\n                                    <Table.Cell>{ app.desc }</Table.Cell>\n                                    <Table.Cell>{ app.apiForwardTarget }</Table.Cell>\n                                    <Table.Cell><Link to={`/app/details?appId=${app.id}&appName=${app.name}`}>详情</Link></Table.Cell>\n                                    <Table.Cell><Link to={`/app/apilist?appId=${app.id}&appName=${app.name}`}>api 列表</Link></Table.Cell>\n                                </Table.Row>)\n                            })\n                        }\n                        </Table.Body>\n\n                    </Table>\n                    \n                    <div>\n                        <Pagination floated='right' activePage={ this.state.activePage } onPageChange={ this.handlePaginationChange } totalPages={ pagedResult.pageCnt || 0 } />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default AppList\n\n\n\n// WEBPACK FOOTER //\n// ./src/Views/AppList.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../node_modules/_postcss-loader@2.1.3@postcss-loader/lib/index.js!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./appList.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_style-loader@0.18.2@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../node_modules/_postcss-loader@2.1.3@postcss-loader/lib/index.js!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./appList.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../node_modules/_postcss-loader@2.1.3@postcss-loader/lib/index.js!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./appList.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/appList.scss\n// module id = 1058\n// module chunks = 7","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* app list begin */\\n#app-list table {\\n  width: 100%;\\n  text-align: left; }\\n\\n#app-list th:nth-child(1) {\\n  width: 20px; }\\n\\n#app-list th:nth-child(2) {\\n  width: 160px; }\\n\\n#app-list th:nth-child(4) {\\n  width: 150px; }\\n\\n#app-list th:nth-child(5) {\\n  width: 120px; }\\n\\n#app-list th:nth-child(6) {\\n  width: 150px; }\\n\\n#app-list .div-search {\\n  display: inline; }\\n  #app-list .div-search .search {\\n    float: right; }\\n\\n/* app list end */\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader!./node_modules/_postcss-loader@2.1.3@postcss-loader/lib!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./src/styles/appList.scss\n// module id = 1059\n// module chunks = 7"],"sourceRoot":""}