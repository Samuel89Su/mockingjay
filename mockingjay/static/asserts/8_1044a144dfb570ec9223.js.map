{"version":3,"sources":["webpack:///./src/Views/ApiList.js","webpack:///./src/styles/apiList.scss?a8a2","webpack:///./src/styles/apiList.scss"],"names":["ApiListV","props","register","bind","handlePaginationChange","search","state","activePage","location","window","query","parse","setState","pageNum","fetchData","nextProps","isSearching","event","data","history","push","e","partialName","value","pagedApis","records","list","Array","detailsQuery","Object","assign","detailsSearch","stringify","map","api","index","cacheKey","path","replace","startsWith","substr","id","name","method","validate","toString","forward","description","pageCnt"],"mappings":"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","file":"asserts/8_1044a144dfb570ec9223.js","sourcesContent":["'use strict'\n\nimport React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport queryString from 'query-string'\nimport '../styles/apiList.scss'\nimport { Table, Header, Button, Pagination, Search } from 'semantic-ui-react'\n\nclass ApiListV extends Component {\n    constructor(props) {\n        super(props)\n\n        this.register = this.register.bind(this)\n        this.handlePaginationChange = this.handlePaginationChange.bind(this)\n        this.search = this.search.bind(this)\n\n        this.state = { activePage: 1 }\n    }    \n\n    componentWillMount() {\n        let search = (this.props.location && this.props.location.search)\n                        ? this.props.location.search\n                        : window.location.search\n        let query = queryString.parse(search)\n        this.setState({ query: query })\n        query.pageNum = this.state.activePage - 1\n        this.props.fetchData(query)\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.setState({isSearching: false})\n    }\n\n    register(event, data) {\n        this.props.history.push('/api/register' + this.props.location.search)\n    }\n\n    handlePaginationChange(e, data) {\n        let query = this.state.query\n        query.pageNum = data.activePage - 1\n        this.setState({ \n            activePage: data.activePage\n            })\n        this.props.fetchData(query)\n    }\n\n    search(e, data) {\n        this.setState({isSearching: true, partialName: data.value})\n\n        this.props.fetchData({ ...this.state.query, partialName: data.value })\n    }\n\n    render() {\n        let pagedApis = this.props.pagedApis || { records: [] }\n        let list = pagedApis.records || []\n        if (!list || !(list instanceof Array) ) {\n            return (<div>has no state</div>)\n        }\n\n        let { isSearching, partialName } = this.state\n\n        let detailsQuery = Object.assign({}, this.state.query)\n        delete detailsQuery.pageNum\n        let detailsSearch = '?' + queryString.stringify(detailsQuery)\n\n        return (\n            <div id='api-list'>\n                <Header as='h2'>API</Header>\n                <div>\n                    <Button onClick={()=>{this.props.history.push('/')}} >返回应用列表</Button>\n                    <Button onClick={this.register} >添加</Button>\n                    <div className='div-search'>\n                        <Search loading={isSearching}\n                            open={false}\n                            onSearchChange={this.search}\n                            value={partialName}\n                            className='search'\n                            placeholder='路径模糊搜索' />\n                    </div>\n                </div>\n\n                <div>\n                    <Table>\n                        <Table.Header fullWidth>\n                            <Table.Row>\n                                <Table.HeaderCell>ID</Table.HeaderCell>\n                                <Table.HeaderCell>名称</Table.HeaderCell>\n                                <Table.HeaderCell>方法</Table.HeaderCell>\n                                <Table.HeaderCell>验证数据</Table.HeaderCell>\n                                <Table.HeaderCell>代理</Table.HeaderCell>\n                                <Table.HeaderCell>路径</Table.HeaderCell>\n                                <Table.HeaderCell>描述</Table.HeaderCell>\n                                <Table.HeaderCell>详情</Table.HeaderCell>\n                            </Table.Row>\n                        </Table.Header>\n                        <Table.Body>\n                            {\n                                list.map((api, index) => {\n                                    let cacheKey = api.path.replace(/\\//g, '_')\n                                    if (cacheKey.startsWith('_')) {\n                                        cacheKey = cacheKey.substr(1)\n                                    }\n                                    return (\n                                        <Table.Row key={ index }>\n                                            <Table.Cell>{ api.id }</Table.Cell>\n                                            <Table.Cell>{ api.name }</Table.Cell>\n                                            <Table.Cell>{ api.method }</Table.Cell>\n                                            <Table.Cell>{ api.validate.toString() }</Table.Cell>\n                                            <Table.Cell>{ api.forward.toString() }</Table.Cell>\n                                            <Table.Cell>{ api.path }</Table.Cell>\n                                            <Table.Cell>{ api.description }</Table.Cell>\n                                            <Table.Cell><Link to={`/api/details${detailsSearch}&id=${api.id}`}>details</Link></Table.Cell>\n                                        </Table.Row>)\n                                })\n                            }\n                        </Table.Body>\n                    </Table>\n\n                    <div>\n                        <Pagination floated='right' activePage={ this.state.activePage } onPageChange={ this.handlePaginationChange } totalPages={ pagedApis.pageCnt || 0 } />\n                    </div>\n                </div>\n                \n            </div>\n        );\n    }\n}\n\nexport default ApiListV\n\n\n// WEBPACK FOOTER //\n// ./src/Views/ApiList.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../node_modules/_postcss-loader@2.1.3@postcss-loader/lib/index.js!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./apiList.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_style-loader@0.18.2@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../node_modules/_postcss-loader@2.1.3@postcss-loader/lib/index.js!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./apiList.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!../../node_modules/_postcss-loader@2.1.3@postcss-loader/lib/index.js!../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./apiList.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/apiList.scss\n// module id = 1056\n// module chunks = 8","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/* api list begin */\\n#api-list table {\\n  width: 100%;\\n  text-align: left; }\\n\\n#api-list th:nth-child(1) {\\n  width: 20px; }\\n\\n#api-list th:nth-child(2) {\\n  width: 160px; }\\n\\n#api-list th:nth-child(3) {\\n  width: 30px; }\\n\\n#api-list th:nth-child(4) {\\n  width: 100px; }\\n\\n#api-list th:nth-child(5) {\\n  width: 90px; }\\n\\n#api-list th:nth-child(6) {\\n  width: 240px; }\\n\\n#api-list th:nth-child(8) {\\n  width: 120px; }\\n\\n#api-list .div-search {\\n  display: inline; }\\n  #api-list .div-search .search {\\n    float: right; }\\n\\n/* api list end */\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader!./node_modules/_postcss-loader@2.1.3@postcss-loader/lib!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./src/styles/apiList.scss\n// module id = 1057\n// module chunks = 8"],"sourceRoot":""}