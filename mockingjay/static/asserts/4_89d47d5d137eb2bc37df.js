webpackJsonp([4],{1e3:function(e,t,r){t=e.exports=r(990)(!1),t.push([e.i,".container-btn {\n  position: fixed;\n  height: 100%;\n  width: 100%; }\n  .container-btn .pane-btn {\n    position: fixed;\n    right: 125px;\n    bottom: 40px;\n    width: 150px;\n    height: 120px; }\n    .container-btn .pane-btn .btn-submit {\n      background: blue;\n      color: white;\n      margin: 5px 0 0 10px; }\n    .container-btn .pane-btn .btn-discard {\n      background: #7a0505;\n      color: white;\n      margin: 5px 0 0 10px; }\n",""])},993:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(0),c=n(l),u=r(997),d=r(257),f=r(998),p=n(f),h=r(69),y=n(h),b=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.update=r.update.bind(r),r.discard=r.discard.bind(r),r.handleChange=r.handleChange.bind(r),r.createReactor=r.createReactor.bind(r),r.addKey=r.addKey.bind(r),r.discardKey=r.discardKey.bind(r),r.state={mockCfg:e.mockCfg,updateDisabled:!0},r}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({mockCfg:e.mockCfg})}},{key:"componentWillMount",value:function(){var e=this.props.location&&this.props.location.search?this.props.location.search:window.location.search,t=y.default.parse(e);this.setState({query:t}),this.props.onMounted(e)}},{key:"handleChange",value:function(e,t){this.state.updateDisabled&&this.setState({updateDisabled:!1});var r=t.name,n="checkbox"===t.type?t.checked:t.value,a=(0,u.updateByPath)((0,u.deepClone)(this.state.mockCfg),r,n);this.setState({mockCfg:a})}},{key:"update",value:function(e){this.setState({updateDisabled:!0});var t=this.state.mockCfg;if(t.reqDescriptor){var r=t.reqDescriptor.queries.length;if(r>0){var n=t.reqDescriptor.queries[r-1];n.key&&n.key.trim()||t.reqDescriptor.queries.pop()}if((r=t.reqDescriptor.headers.length)>0){var a=t.reqDescriptor.headers[r-1];a.key&&a.key.trim()||t.reqDescriptor.headers.pop()}}if(length=t.resDescriptor.headers.length,length>0){var o=t.resDescriptor.headers[length-1];o.key&&o.key.trim()||t.resDescriptor.headers.pop()}this.props.onUpdateClick(t)}},{key:"discard",value:function(e){history.back()}},{key:"createReactor",value:function(e,t){return t?c.default.createElement("div",null,c.default.createElement(d.Dropdown,{name:e+".reactor.type",value:t.type,onChange:this.handleChange,options:[{text:"Fixed",value:"fixed"},{text:"Custom",value:"custom"}]}),c.default.createElement(d.TextArea,{name:e+".reactor.value",value:t.value,onChange:this.handleChange})):c.default.createElement("span",null)}},{key:"addKey",value:function(e){this.state.updateDisabled&&this.setState({updateDisabled:!1});var t=this.state.mockCfg,r={},n=null;switch(e){case"query":r=t.reqDescriptor.queries,n={key:"",required:!1,validator:{type:"fixed",value:"",errMsg:""}};break;case"reqHeader":r=t.reqDescriptor.headers,n={key:"",required:!1,validator:{type:"fixed",value:"",errMsg:""}};break;case"resHeader":r=t.resDescriptor.headers,n={key:"",optional:!1,reactor:{type:"fixed",value:"",errMsg:""}};break;default:return}var a=r.length;if(a>0){if(!r[a-1].key)return}r.push(n),this.setState({mockCfg:t})}},{key:"discardKey",value:function(e,t){this.state.updateDisabled&&this.setState({updateDisabled:!1});var r=this.state.mockCfg,n={};switch(e){case"query":n=r.reqDescriptor.queries;break;case"reqHeader":n=r.reqDescriptor.headers;break;case"resHeader":n=r.resDescriptor.headers;break;default:return}for(var a=-1,o=0;o<n.length;o++){n[o].key===t&&(a=o)}n.splice(a,1),this.setState({apiMcCfg:r})}},{key:"render",value:function(){var e=this,t=this.state.mockCfg;return t&&t.hasOwnProperty("mock")?c.default.createElement("div",{id:"div_apiMcCfg"},c.default.createElement(d.Form,null,c.default.createElement(d.Checkbox,{label:"启用Mock",name:"mock",toggle:!0,checked:t.mock,onChange:this.handleChange}),c.default.createElement("br",null),c.default.createElement("text",null,"支持两种Mock规则，fixed: 固定，custom： 编写自定义 js 脚本为变量retVal(已定义)赋值，可使用 request 变量中的 query、header、body "),c.default.createElement("div",{id:"dv_mockCfg"},c.default.createElement(d.Header,{as:"h3"},"Response"),c.default.createElement(d.Header,{as:"h4"},"Headers"),c.default.createElement(d.Button,{onClick:function(){return e.addKey("resHeader")}},"Add"),c.default.createElement("ul",null,t.resDescriptor.headers.map(function(t,r){return c.default.createElement("li",{key:r},c.default.createElement(d.Input,{label:"Key: ",name:"resDescriptor.headers."+r+".key",value:t.key,onChange:e.handleChange}),c.default.createElement(d.Checkbox,{label:"Optional",toggle:!0,className:"sp-inline-form",name:"resDescriptor.headers."+r+".optional",checked:t.optional,onChange:e.handleChange}),c.default.createElement(d.Button,{onClick:function(){return e.discardKey("resHeader",t.key)}},"Remove"),c.default.createElement(d.Header,{as:"h5"},"Rule"),e.createReactor("resDescriptor.headers."+r,t.reactor))})),c.default.createElement("h4",null,"Body"),c.default.createElement("div",null,c.default.createElement(d.Checkbox,{label:"Optional",toggle:!0,name:"resDescriptor.body.optional",checked:t.resDescriptor.body.optional,onChange:this.handleChange}),this.createReactor("resDescriptor.body",t.resDescriptor.body.reactor)))),c.default.createElement(p.default,{applyAction:this.update,applyDisabled:this.state.updateDisabled&&Boolean(this.state.updateDisabled),hideDiscard:!1,discardAction:this.discard})):c.default.createElement("div",null,"has no state")}}]),t}(l.Component);t.default=b},997:function(e,t,r){"use strict";function n(e){if("object"===(void 0===e?"undefined":u(e))){if(e instanceof Array){for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}var a={};for(var o in e)a[o]=n(e[o]);return a}return e}function a(e,t){for(var r=t.split("."),n=e,a=0;a<r.length;a++){var o=r[a];if(n instanceof Array){n=n[parseInt(o)]}else n=(r.length,n[o])}return n}function o(e,t,r){for(var n=t.split("."),a=e,o=0;o<n.length;o++){var i=n[o];if(a instanceof Array){a=a[parseInt(i)]}else o===n.length-1?("true"===r?r=!0:"false"===r&&(r=!1),a[i]=r):a=a[i]}return e}function i(e,t){for(var r=t.split("."),n=e,a=0;a<r.length;a++){var o=r[a];if(n instanceof Array){n=n[parseInt(o)]}else a===r.length-1?delete n[o]:n=n[o]}return e}function s(e){if(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}else if("object"===(void 0===e?"undefined":u(e))&&e instanceof Array)for(var t=0;t<e.length;t++)e[t]=s(e[t]);else if("object"===(void 0===e?"undefined":u(e)))for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];e[r]=s(n)}}else;return e}function l(e){var t=[];if(e&&"object"===(void 0===e?"undefined":u(e)))for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t.push({key:r,value:n})}return t}function c(e){var t={};return e&&e instanceof Array&&e.length>0&&e.forEach(function(e){e.key&&"string"==typeof e.key&&e.value&&(t[e.key]=e.value)}),t}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.deepClone=n,t.updateByPath=o,t.delByPath=i,t.getPropertyByPath=a,t.parseRecursive=s,t.object2Array=l,t.array2Object=c},998:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=r(257);r(999);var u=function(e){function t(e){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return o(t,e),i(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"container-btn"},l.default.createElement("div",{className:"pane-btn"},l.default.createElement(c.Button,{className:"btn-submit",size:"massive",disabled:this.props.applyDisabled,onClick:this.props.applyAction},"Update"),l.default.createElement("br",null)))}}]),t}(s.Component);t.default=u},999:function(e,t,r){var n=r(1e3);"string"==typeof n&&(n=[[e.i,n,""]]);var a={};a.transform=void 0;r(991)(n,a);n.locals&&(e.exports=n.locals)}});